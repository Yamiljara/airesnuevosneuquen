<div id="popup-ad-container" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; display: flex; justify-content: center; align-items: center;">
    <div class="popup-ad-content" style="background: white; padding: 20px; border-radius: 8px; position: relative; max-width: 90%; max-height: 90%; overflow: auto;">
        <button id="popup-ad-close-button" class="popup-close-btn">&times;</button>
        
        {% if include.ad_image and include.ad_url %}
        <a href="{{ include.ad_url }}" target="_blank" rel="noopener noreferrer">
            <img src="{{ include.ad_image | relative_url }}" alt="{{ include.ad_alt }}" style="max-width: 100%; height: auto; display: block;">
        </a>
        {% else %}
            <p>No se pudo cargar la publicidad pop-up. Asegúrate de que tenga una imagen y una URL.</p>
        {% endif %}
    </div>
</div>

<style>
  /* Estilos CSS para el pop-up (puedes mover esto a tu archivo CSS principal si prefieres) */
  #popup-ad-container {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
  }

  #popup-ad-container.is-visible {
    opacity: 1;
    visibility: visible;
  }

  .popup-ad-content {
    /* Puedes ajustar el tamaño del popup aquí */
    min-width: 300px; /* Ejemplo */
    min-height: 200px; /* Ejemplo */
  }

  /* Responsive para imágenes dentro del pop-up */
  .popup-ad-content img {
    max-width: 100%;
    height: auto;
    display: block; /* Para eliminar el espacio extra debajo de las imágenes */
  }

  /* --- NUEVOS ESTILOS PARA EL BOTÓN DE CIERRE --- */
  .popup-close-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(255, 255, 255, 0.8); /* Fondo blanco semitransparente */
    border: 1px solid #ccc; /* Borde gris suave */
    border-radius: 50%; /* Circular */
    width: 40px; /* Ancho del botón */
    height: 40px; /* Alto del botón */
    line-height: 40px; /* Para centrar la 'x' verticalmente */
    text-align: center; /* Para centrar la 'x' horizontalmente */
    font-size: 30px; /* Tamaño de la 'x' */
    color: #333; /* Color de la 'x' */
    cursor: pointer;
    display: flex; /* Usamos flexbox para centrar mejor el contenido (la 'x') */
    justify-content: center;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Sombra para que destaque */
    transition: background 0.3s ease, color 0.3s ease; /* Transición suave al pasar el ratón */
  }

  .popup-close-btn:hover {
    background: #e0e0e0; /* Cambio de fondo al pasar el ratón */
    color: #000; /* Cambio de color de la 'x' al pasar el ratón */
  }
  /* --- FIN NUEVOS ESTILOS PARA EL BOTÓN DE CIERRE --- */
</style>